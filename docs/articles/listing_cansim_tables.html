<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-CA">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Listing Statistics Canada data tables • cansim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Listing Statistics Canada data tables">
<meta name="description" content="Data discovery and pinpointing the best data to use is an important and often challenging aspect of analysis. The package offers several methods to programmatically search through data available via the StatCan NDM.
">
<meta property="og:description" content="Data discovery and pinpointing the best data to use is an important and often challenging aspect of analysis. The package offers several methods to programmatically search through data available via the StatCan NDM.
">
<meta property="og:image" content="https://mountainmath.github.io/cansim/logo.png">
<meta property="og:image:alt" content="cansim">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@vb_jens">
<meta name="twitter:site" content="https://mountainmath.github.io/cansim/">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107390160-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107390160-2');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cansim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/cansim.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/listing_cansim_tables.html">Listing Statistics Canada data tables</a></li>
    <li><a class="dropdown-item" href="../articles/partial_table_data_download.html">Partial table data download</a></li>
    <li><a class="dropdown-item" href="../articles/retrieving_cansim_vectors.html">Retrieving individual Statistics Canada vectors</a></li>
    <li><a class="dropdown-item" href="../articles/working_with_hierarchies.html">Working with Statistics Canada data table object hierarchies</a></li>
    <li><a class="dropdown-item" href="../articles/working_with_large_tables.html">Working with large tables</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/v0.3.8">Version 0.3.8</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/v0.3.7">Version 0.3.7</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3.6">Version 0.3.6</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3.5">Version 0.3.5</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3.4">Version 0.3.4</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3.2">Version 0.3.2</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3.1">Version 0.3.1</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.3">Version 0.3</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/mountainMath/cansim/releases/tag/0.2.2">Version 0.2.2</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mountainMath/cansim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Listing Statistics Canada data tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mountainMath/cansim/blob/HEAD/vignettes/listing_cansim_tables.Rmd" class="external-link"><code>vignettes/listing_cansim_tables.Rmd</code></a></small>
      <div class="d-none name"><code>listing_cansim_tables.Rmd</code></div>
    </div>

    
    
<p>This vignette details how to use the internal table search functions
in the <code>cansim</code> package with a simple example using
employment data for economic regions in British Columbia.</p>
<p>The list of available tables is cached in the current R session to
avoid repeated downloading of data.</p>
<div class="section level3">
<h3 id="listing-and-filtering-tables">Listing and filtering tables<a class="anchor" aria-label="anchor" href="#listing-and-filtering-tables"></a>
</h3>
<p>Calling <code>list_cansim_cubes</code> returns a data frame with
useful metadata for available tables. There are 21 fields of metadata
for each table including title, in English and French, keyword sets,
notes, and table numbers.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mountainMath/cansim" class="external-link">cansim</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/list_cansim_cubes.html">list_cansim_cubes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Retrieving cube information from StatCan servers...</span></span>
<span><span class="co">#&gt;  [1] "cansim_table_number" "cubeTitleEn"         "cubeTitleFr"        </span></span>
<span><span class="co">#&gt;  [4] "productId"           "cansimId"            "cubeStartDate"      </span></span>
<span><span class="co">#&gt;  [7] "cubeEndDate"         "releaseTime"         "archived"           </span></span>
<span><span class="co">#&gt; [10] "subjectCode"         "surveyCode"          "frequencyCode"      </span></span>
<span><span class="co">#&gt; [13] "corrections"         "issueDate"           "dimensionNameEn"    </span></span>
<span><span class="co">#&gt; [16] "dimensionNameFr"     "surveyEn"            "surveyFr"           </span></span>
<span><span class="co">#&gt; [19] "subjectEn"           "subjectFr"</span></span></code></pre></div>
<p>The appropriate table can be found by subsetting or filtering on the
properties we want to use to find the appropriate tables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/list_cansim_cubes.html">list_cansim_cubes</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Labour force characteristics"</span>,<span class="va">cubeTitleEn</span><span class="op">)</span>, </span>
<span>         <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"economic region"</span>,<span class="va">cubeTitleEn</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">cansim_table_number</span>,<span class="va">cubeTitleEn</span><span class="op">)</span></span>
<span><span class="co">#&gt; Retrieving cube information from temporary cache.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">#&gt;   cansim_table_number cubeTitleEn                                               </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 14-10-0090          Labour force characteristics by province, territory and e…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 14-10-0293          Labour force characteristics by economic region, three-mo…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 14-10-0462          Labour force characteristics by economic region, three-mo…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 14-10-0464          Labour force characteristics by province, territory and e…</span></span></code></pre></div>
<p>The search came up with two tables. In this example we are interested
in the unemployment rate for 2015 onward for the Lower Mainland,
Vancouver Island, and Okanagan economic regions from the Labour Force
Characteristics table. We use the <code>tidyr</code> package here to
reshape data from a long format to a wider format.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">selected_table</span> <span class="op">&lt;-</span> <span class="st">"14-10-0293"</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/get_cansim.html">get_cansim</a></span><span class="op">(</span><span class="va">selected_table</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Mainland|Vancouver Island|Okanagan"</span>, <span class="va">GEO</span><span class="op">)</span>,</span>
<span>         <span class="va">Date</span><span class="op">&gt;=</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span>,</span>
<span>         <span class="va">`Labour force characteristics`</span><span class="op">==</span><span class="st">"Unemployment rate"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Date</span>, <span class="va">GEO</span>, <span class="va">Statistics</span>, <span class="va">val_norm</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span>key<span class="op">=</span><span class="st">"Statistics"</span>, value<span class="op">=</span><span class="va">val_norm</span><span class="op">)</span></span>
<span><span class="co">#&gt; Accessing CANSIM NDM product 14-10-0293 from Statistics Canada</span></span>
<span><span class="co">#&gt; Parsing data</span></span></code></pre></div>
<p>We can visualize then results with <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Date</span>, group <span class="op">=</span> <span class="va">GEO</span>,y<span class="op">=</span><span class="va">Estimate</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin<span class="op">=</span><span class="va">Estimate</span> <span class="op">-</span> <span class="va">`Standard error of estimate`</span>,</span>
<span>                  ymax<span class="op">=</span><span class="va">Estimate</span> <span class="op">+</span> <span class="va">`Standard error of estimate`</span>, fill<span class="op">=</span><span class="st">""</span><span class="op">)</span>,</span>
<span>              alpha<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="va">GEO</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span>, values<span class="op">=</span><span class="st">"grey80"</span>, label<span class="op">=</span><span class="st">"Standard error"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Comparison of unemployment rate by economic region"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Unemployment Rate"</span>, </span>
<span>       x <span class="op">=</span> <span class="st">""</span>,</span>
<span>       color <span class="op">=</span> <span class="st">""</span>,</span>
<span>       caption<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"CANSIM "</span>, <span class="va">selected_table</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="listing_cansim_tables_files/figure-html/unnamed-chunk-4-1.png" alt="Vignette example plot, unemployent rate" width="672"></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://mountainmath.ca" class="external-link">Jens von Bergmann</a>, <a href="https://dshkol.com" class="external-link">Dmitry Shkolnik</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
